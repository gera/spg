#!/usr/bin/perl -w
use strict;

use Digest::MD5;
use Clipboard;
sub askpass();

my $sitename = shift
	or die "please provide sitename";

my $secret = askpass();
my $md5 = Digest::MD5::md5_base64($secret . " " . $sitename);

my $chars = $1 if($md5 =~ /^(.{10})/);

Clipboard->copy($chars);

exit 0;


sub askpass()
{
	my $word;
	system "stty -echo";
	print STDERR "Password: ";
	chomp($word = <STDIN>);
	print STDERR "\n";
	system "stty echo";
	return $word;
}

__END__

=head1 NAME

spg - Simple Password Generator.

=head1 SYNOPSIS

  $ spg <sitename>

=head1 DESCRIPTION

The Simple Password Generator is a simple way to remember passwords. You
choose a single secret phrase. For a password for a site "website", it
generates the password as the first eight characters of the MD5 hash of (
secret-prase + "website").

You just have to remember one phrase and you have a unique system of
passwords.

The idea behind this was originally taken from a system described in one of
the comments on a blog ( url :
http://www.schneier.com/blog/archives/2007/11/how_to_harvest.html#c220047 ).


=head1 AUTHOR

Devendra Gera, E<lt>gera@theoldmonk.net<gt>

=head1 COPYRIGHT AND LICENSE

This program is released under the GNU GPL version 2. A copy of the license
can be obtained from http://www.gnu.org/licenses/old-licenses/gpl-2.0.html

This program comes with no warranties, weather implied or expressed to the
extent permissible by law. This program has NOT been tested thoroughly. Do NOT
trust your data to the passwords generated by this program. It WILL leave
traces (even copies) of passwords in RAM. Your password is as weak as the
secret phrase you chose. You have been warned.

=cut
